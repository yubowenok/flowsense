### Plot ###

(def @show (string "show"))
(rule $ShowVerb ($TOKEN) (FilterTokenFn lemma show chart create draw illustrate present render show visualize view see))

(rule $Show ($ShowVerb) (ConstantFn @show))
(rule $Show ($ShowVerb $StopNoun) (ConstantFn @show))
(rule $Show ($Show $Prep) (ConstantFn @show))

(def @chart (string "chart_type"))
(rule $Chart (plot) (ConstantFn @chart))
(rule $Chart (chart) (ConstantFn @chart))
(rule $Chart (visualization) (ConstantFn @chart))
(rule $Chart (graph) (ConstantFn @chart))
(rule $Chart (chart_type) (ConstantFn @chart))
(rule $Chart ($Chart plot) (ConstantFn @chart))
(rule $Chart ($Det $Chart) (ConstantFn @chart))
(rule $Chart ($Chart ($Prep optional) $StopNoun) (ConstantFn @chart))

(rule $InChart ($PrepIn $Chart) (ConstantFn @chart))

(rule $ChartPartial ($Chart) (ConstantFn (lambda x (call + @chart (string " ")(var x)))))

# (show) (a) scatterplot
(rule $PlotPhrase (($Show optional) $Chart) (ConstantFn @chart))
# show
(rule $PlotPhrase ($Show) (ConstantFn @chart))

# show a plot
(rule $Plot ($PlotPhrase) (IdentityFn)) 
# show a scatterplot (of) mpg
(rule $Plot ($PlotPhrase ($Prep optional) $Dims) (ConcatFn " "))
# show all the dimensions in a parallel coordinates
(rule $Plot ($PlotPhrase $Dims ($Prep optional) ($Det optional) ($Chart optional)) (ConcatFn " "))

# mpg series
(rule $DimChart ($Dims $Chart) (ConcatFn reverse " "))
# mpg series over time
(rule $DimChart ($DimChart ($PrepOver optional) $Dim) (ConcatFn " "))

# mpg scatterplot
(rule $Plot ($DimChart) (IdentityFn))

# show mpg series over time
(rule $Plot ($PlotPhrase $DimChart) (SelectFn 1))


### Application ###
(rule $Command ($Plot) (IdentityFn))

